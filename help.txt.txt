REVISITING THIS REPO

lecture notes from mike rosetti
https://github.com/s2t2/lambda-ds-3-3

lecture notes from lambda
https://github.com/LambdaSchool/DS-Unit-3-Sprint-3-Productization-and-Cloud/tree/master/module4-web-application-deployment

video:


run this locally:
if pipenv has been installed with dependencies: pipenv shell

***
FLASK_APP=web_app flask run

access http://localhost:5000/ to prediction form

run this on the cloud (heroku)
1. heroku login

2. push repo to heroku server:
(a) create a new app server
heroku create airbnb-predictions

now, you have two git repositories

heroku run bash


FYI:
# check remote
git remote - v








ARCHITECTURE SUMMARY:
TBA
- heroku PaaS


EVENTS
(1) 
TROUBLESHOOTING: prediction not working!
(2) 
BASIC prediction functionally works in local environment!
LINEAR model

(3) deploying to production in heroku (watching video)

(4) heroku troubleshooting / updating heroku *****

(5) heroku troubleshooting
issue? build packs update?
	issue? pipfile in root folder. reinstalling:
		pipenv install Flask, scikit-learn, pandas, numpy
			fix: breaking up pipenv install

(6) heroku troubleshooting

issue? build packs update?
	issue? pipfile in root folder. reinstalling:
		pipenv install Flask, scikit-learn, pandas, numpy
			fix: breaking up pipenv install
issue? build packs update?
	adding runtime.txt 
		FAIL
	trying: heroku buildpacks:set heroku/php
		FAIL
	trying: delete app and re-do 
		heroku create airbnb-predictions
		FAIL
			potential cause python 3.7 not supported by heroku
			try 3.7.9, 3.8..6, 3.9.1
			pipenv --python 3.7.9 FAIL
			try updating pipfile: python_version = "3.7.9"

(7)
			....
			** try updating pipfile: python_version = "3.7.9". stack "heroku-18" does not support 3.7.3?


(8)
			...
			push repo to origin
			heroku create airbnb-predictions --buildpack heroku/python
			then git push origin main
				NEW ERROR "Your Pipfile.lock (89cdec) is out of date. Expected: (f17a82)."
					fix: deleted it. exited shell. 



			

(9)			....
				NEW ERROR "Your Pipfile.lock (89cdec) is out of date. Expected: (f17a82)."
					fix: deleted it. exited shell. 

(10)			....
				Updated more dependencies. the pipfile was not setup properly earlier
					deployment successful: 
						BUT error: H14 "no web dynos working" 
						ref: https://devcenter.heroku.com/articles/error-codes
						
						scale dynos from 0 to 1?

**heroku logs --tail

DEC 21

(1ST HOUR)
		....					
			ISSUE: CANNOT SCALE DYNOS. 
			pipenv out of data:> delete and then pipenv lock. git push to origin and heroku


			new issue: H10 error / dyne crashes

			Procfile variations: 
			web: gunicorn --bind 0.0.0.0:$PORT flaskapp:app
			web: gunicorn wsgi:app
			web: gunicorn app:app

NEXT: WATCH LECTURE VIDEO

(2ND HOUR)
	lecture video. Pipfile that repository (or requirements.txt)
	








** app: https://airbnb-predictions.herokuapp.com/

					









SHORTCUT TIP: cmd + shift + . to expose hidden files
	





NEXT:
- ensure model is accurate.
- run this with a random forest?
- revisit modeling
ENSURE

ERRORS
400
500

relevant definitions:
Gunicorn is a pure-Python HTTP server for WSGI applications. It allows you to run any Python application concurrently by running multiple Python processes within a single dyno. It provides a perfect balance of performance, flexibility, and configuration simplicity.





MIKE ROSETTI'S




FYI: 
ryan herr's dash template
https://lambdaschool.github.io/ds/unit2/dash-template/

ryan herr's dash template repo:
https://github.com/rrherr/dash-template

ryan herr's walkthrough on Youtube:
https://www.youtube.com/watch?v=FreMhNpddEE&feature=youtu.be&t=2593






